CREATE DATABASE study_mate;

DROP TABLE IF EXISTS study_user;
CREATE TABLE study_user (
	user_sn INTEGER PRIMARY KEY GENERATED BY DEFAULT AS IDENTITY,
	user_id VARCHAR(20) NOT NULL UNIQUE,
	nickname VARCHAR(20) NULL,
	user_password VARCHAR(60) NOT NULL,
	temperature_setting REAL NULL,
	humidity_setting REAL NULL,
	rasberrypi_address VARCHAR(45) NULL
	);
DROP TABLE IF EXISTS study_time;
CREATE TABLE study_time (
	study_time_sn INTEGER PRIMARY KEY GENERATED BY DEFAULT AS IDENTITY,
	user_sn INTEGER NOT NULL REFERENCES study_user (user_sn) ON DELETE CASCADE,
	start_timestamp TIMESTAMP WITHOUT TIME ZONE NOT NULL,
	end_timestamp TIMESTAMP WITHOUT TIME ZONE NULL,
	total_time INTERVAL NULL,
	focus_time INTERVAL NULL
	);
DROP TABLE IF EXISTS study_record;
CREATE TABLE study_record (
	study_record_sn INTEGER PRIMARY KEY GENERATED BY DEFAULT AS IDENTITY,
	study_time_sn INTEGER NOT NULL REFERENCES study_time (study_time_sn) ON DELETE CASCADE,
	start_timestamp TIMESTAMP WITHOUT TIME ZONE NOT NULL,
	end_timestamp TIMESTAMP WITHOUT TIME ZONE NULL,
	record_time INTERVAL NULL
	);
	